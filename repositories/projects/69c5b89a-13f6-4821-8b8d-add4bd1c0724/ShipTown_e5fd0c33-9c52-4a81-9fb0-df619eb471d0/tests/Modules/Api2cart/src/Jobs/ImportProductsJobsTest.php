<?php

namespace Tests\Modules\Api2cart\src\Jobs;

use App\Abstracts\JobTestAbstract;
use App\Modules\Api2cart\src\Jobs\ProcessImportedProductsJob;
use App\Modules\Api2cart\src\Models\Api2cartCallResponse;

class ImportProductsJobsTest extends JobTestAbstract
{
    public function test_job()
   {
       $str = '{"product": [{"id": "14871", "url": "https://www.korallo.pl/catalog/product/view/id/14871?___store=sklep_korallo", "name": "Produkt testowy 2 MW", "type": "simple", "price": 17.71, "u_ean": null, "u_mpn": null, "u_sku": "XX0001", "u_upc": null, "width": null, "height": null, "images": [{"id": "2684", "alt": null, "size": null, "type": "IMAGE_TYPE_BASE", "avail": true, "create_at": null, "file_name": "blad-csv.png", "http_path": "https://www.korallo.pl/media/catalog/product/b/l/blad-csv.png", "mime-type": "image/png", "sort_order": 1, "modified_at": null}], "length": null, "u_gtin": null, "u_isbn": null, "weight": 0, "on_sale": null, "seo_url": "https://www.korallo.pl/produkt-testowy-2-xx0001", "u_brand": null, "u_model": "XX0001", "in_stock": true, "quantity": 484, "create_at": {"value": "2018-11-05T17:06:26+0100", "format": "Y-m-d\\\\TH:i:sO"}, "discounts": [], "inventory": [], "avail_sale": false, "avail_view": false, "backorders": "False", "cost_price": null, "is_virtual": false, "meta_title": null, "sort_order": null, "stores_ids": ["1", "2"], "tier_price": [], "u_brand_id": null, "description": "", "group_items": [], "group_price": [], "modified_at": {"value": "2021-09-10T11:35:34+0200", "format": "Y-m-d\\\\TH:i:sO"}, "weight_unit": null, "manage_stock": "True", "tax_class_id": "5", "custom_fields": {"new": "0", "sale": "0", "color": "biały", "barcode": null, "dlugosc": "długość", "grubosc": "grubość", "ksztalt": null, "material": "szkło", "srednica": "średnica", "wysokosc": "wysokość", "barcode_l": null, "producent": null, "property1": "producent 1", "property2": null, "property3": "inna cecha 1", "szerokosc": "szerokość", "cenazakupu": null, "final_sale": null, "property11": "1, 2", "rma_status": "1", "rozmiar_toho": null, "nr_kalkulacji": null, "dlugosc_sznura": null, "podmiot_labera": null, "rodzaj_sznurka": null, "podmiot_korallo": null, "rozmiar_dziurki": null, "wielkosc_dziurki": null, "efekt_wykonczenia": null, "produktwyprzedany": null, "rodzaj_opakowania": null, "count_items_labera": "10 szt", "import_scheme_name": null, "product_banner_top": null, "rodzaj_wykonczenia": null, "rozmiar_podstawowy": null, "searchindex_weight": null, "count_items_korallo": "15 szt", "product_banner_bottom": null, "zastosowanie_technika": null, "podmiot_odpowiedzialny": null, "bizuteriazestalichirurgicznej": null}, "meta_keywords": null, "special_price": {"avail": false, "value": 0, "created_at": null, "expired_at": null, "modified_at": null}, "advanced_price": [], "categories_ids": ["1160"], "dimensions_unit": null, "is_downloadable": false, "product_options": [], "is_stock_managed": true, "meta_description": null, "additional_fields": {"status": "2", "sku_type": null, "tax_class": null, "price_type": null, "visibility": "4", "weight_type": null, "qty_increments": null, "enable_googleco": null, "country_of_manufacture": null}, "short_description": null, "grouped_products_ids": [], "related_products_ids": [], "up_sell_products_ids": [], "cross_sell_products_ids": []}, {"id": "14872", "url": "https://www.korallo.pl/catalog/product/view/id/14872?___store=sklep_korallo", "name": "Produkt testowy 3", "type": "simple", "price": 9.6, "u_ean": null, "u_mpn": null, "u_sku": "XX0002", "u_upc": null, "width": null, "height": null, "images": [], "length": null, "u_gtin": null, "u_isbn": null, "weight": 0, "on_sale": null, "seo_url": "https://www.korallo.pl/produkt/produkt-testowy-3-xx0002", "u_brand": null, "u_model": "XX0002", "in_stock": true, "quantity": 56, "create_at": {"value": "2018-11-30T08:59:30+0100", "format": "Y-m-d\\\\TH:i:sO"}, "discounts": [], "inventory": [], "avail_sale": false, "avail_view": false, "backorders": "False", "cost_price": null, "is_virtual": false, "meta_title": null, "sort_order": null, "stores_ids": ["1", "2"], "tier_price": [], "u_brand_id": null, "description": "", "group_items": [], "group_price": [], "modified_at": {"value": "2021-09-28T15:17:01+0200", "format": "Y-m-d\\\\TH:i:sO"}, "weight_unit": null, "manage_stock": "True", "tax_class_id": "5", "custom_fields": {"new": "0", "sale": "0", "color": null, "barcode": null, "dlugosc": "długość", "grubosc": "grubość", "ksztalt": null, "material": "szkło", "srednica": "średnica", "wysokosc": "wysokosć", "barcode_l": null, "producent": null, "property1": "producent", "property2": null, "property3": "inna cecha", "szerokosc": "szerokość", "cenazakupu": null, "final_sale": null, "property11": null, "rma_status": "1", "rozmiar_toho": null, "nr_kalkulacji": null, "dlugosc_sznura": null, "podmiot_labera": null, "rodzaj_sznurka": null, "podmiot_korallo": null, "rozmiar_dziurki": null, "wielkosc_dziurki": null, "efekt_wykonczenia": null, "produktwyprzedany": null, "rodzaj_opakowania": null, "count_items_labera": "20 szt", "import_scheme_name": null, "product_banner_top": null, "rodzaj_wykonczenia": null, "rozmiar_podstawowy": null, "searchindex_weight": null, "count_items_korallo": "10 szt", "product_banner_bottom": null, "zastosowanie_technika": null, "podmiot_odpowiedzialny": null, "bizuteriazestalichirurgicznej": null}, "meta_keywords": null, "special_price": {"avail": false, "value": 0, "created_at": null, "expired_at": null, "modified_at": null}, "advanced_price": [], "categories_ids": ["1160"], "dimensions_unit": null, "is_downloadable": false, "product_options": [], "is_stock_managed": true, "meta_description": null, "additional_fields": {"status": "2", "sku_type": null, "tax_class": null, "price_type": null, "visibility": "4", "weight_type": null, "qty_increments": null, "enable_googleco": null, "country_of_manufacture": null}, "short_description": null, "grouped_products_ids": [], "related_products_ids": [], "up_sell_products_ids": [], "cross_sell_products_ids": []}, {"id": "14873", "url": "https://www.korallo.pl/catalog/product/view/id/14873?___store=sklep_korallo", "name": "weryfikacja synchronizacji automatycznej xx0004", "type": "simple", "price": 15.3, "u_ean": null, "u_mpn": null, "u_sku": "XX0004", "u_upc": null, "width": null, "height": null, "images": [{"id": "2693", "alt": null, "size": null, "type": "IMAGE_TYPE_THUMBNAIL", "avail": true, "create_at": null, "file_name": "fotoSmall_7.jpg", "http_path": "https://www.korallo.pl/media/catalog/product/f/o/fotoSmall_7.jpg", "mime-type": "image/jpeg", "sort_order": 2, "modified_at": null}, {"id": "2694", "alt": null, "size": null, "type": "IMAGE_TYPE_SMALL", "avail": true, "create_at": null, "file_name": "fotoBig_8.jpg", "http_path": "https://www.korallo.pl/media/catalog/product/f/o/fotoBig_8.jpg", "mime-type": "image/jpeg", "sort_order": 2, "modified_at": null}, {"id": "2695", "alt": null, "size": null, "type": "IMAGE_TYPE_BASE", "avail": true, "create_at": null, "file_name": "fotoBig2.jpg", "http_path": "https://www.korallo.pl/media/catalog/product/f/o/fotoBig2.jpg", "mime-type": "image/jpeg", "sort_order": 2, "modified_at": null}], "length": null, "u_gtin": null, "u_isbn": null, "weight": 0.001, "on_sale": null, "seo_url": "https://www.korallo.pl/produkt/produkt-testowy-5-xx0004", "u_brand": null, "u_model": "XX0004", "in_stock": true, "quantity": 971, "create_at": {"value": "2018-12-03T14:21:00+0100", "format": "Y-m-d\\\\TH:i:sO"}, "discounts": [], "inventory": [], "avail_sale": false, "avail_view": false, "backorders": "False", "cost_price": null, "is_virtual": false, "meta_title": null, "sort_order": null, "stores_ids": ["1", "2"], "tier_price": [], "u_brand_id": null, "description": "", "group_items": [], "group_price": [], "modified_at": {"value": "2019-01-16T15:25:19+0100", "format": "Y-m-d\\\\TH:i:sO"}, "weight_unit": null, "manage_stock": "True", "tax_class_id": "5", "custom_fields": {"new": "0", "sale": "0", "color": null, "barcode": null, "dlugosc": "ok. 35.00 mm", "grubosc": null, "ksztalt": null, "material": "szkło", "srednica": null, "wysokosc": null, "barcode_l": null, "producent": null, "property1": null, "property2": null, "property3": null, "szerokosc": null, "cenazakupu": null, "final_sale": "0", "property11": null, "rma_status": "1", "rozmiar_toho": null, "nr_kalkulacji": null, "dlugosc_sznura": null, "podmiot_labera": null, "rodzaj_sznurka": null, "podmiot_korallo": null, "rozmiar_dziurki": "1.0 - 1.4 mm", "wielkosc_dziurki": "ok. 1,00 mm", "efekt_wykonczenia": null, "produktwyprzedany": null, "rodzaj_opakowania": null, "count_items_labera": "50 g", "import_scheme_name": null, "product_banner_top": null, "rodzaj_wykonczenia": null, "rozmiar_podstawowy": null, "searchindex_weight": null, "count_items_korallo": "5 g", "product_banner_bottom": null, "zastosowanie_technika": null, "podmiot_odpowiedzialny": null, "bizuteriazestalichirurgicznej": null}, "meta_keywords": null, "special_price": {"avail": false, "value": 0, "created_at": null, "expired_at": null, "modified_at": null}, "advanced_price": [], "categories_ids": ["1533"], "dimensions_unit": null, "is_downloadable": false, "product_options": [], "is_stock_managed": true, "meta_description": null, "additional_fields": {"status": "2", "sku_type": null, "tax_class": null, "price_type": null, "visibility": "4", "weight_type": null, "qty_increments": null, "enable_googleco": null, "country_of_manufacture": null}, "short_description": null, "grouped_products_ids": [], "related_products_ids": [], "up_sell_products_ids": [], "cross_sell_products_ids": []}, {"id": "14875", "url": "https://www.korallo.pl/catalog/product/view/id/14875?___store=sklep_korallo", "name": "Produkt testowy 6", "type": "simple", "price": 16.3, "u_ean": null, "u_mpn": null, "u_sku": "XX0005", "u_upc": null, "width": null, "height": null, "images": [{"id": "2685", "alt": null, "size": null, "type": "IMAGE_TYPE_BASE", "avail": true, "create_at": null, "file_name": "DK0003.jpg", "http_path": "https://www.korallo.pl/media/catalog/product/D/K/DK0003.jpg", "mime-type": "image/jpeg", "sort_order": 1, "modified_at": null}], "length": null, "u_gtin": null, "u_isbn": null, "weight": 0, "on_sale": null, "seo_url": "https://www.korallo.pl/produkt/produkt-testowy-6-xx0005", "u_brand": null, "u_model": "XX0005", "in_stock": true, "quantity": 5, "create_at": {"value": "2018-12-04T17:57:36+0100", "format": "Y-m-d\\\\TH:i:sO"}, "discounts": [], "inventory": [], "avail_sale": false, "avail_view": false, "backorders": "False", "cost_price": null, "is_virtual": false, "meta_title": null, "sort_order": null, "stores_ids": ["1", "2"], "tier_price": [], "u_brand_id": null, "description": "", "group_items": [], "group_price": [], "modified_at": {"value": "2018-12-05T11:45:02+0100", "format": "Y-m-d\\\\TH:i:sO"}, "weight_unit": null, "manage_stock": "True", "tax_class_id": "5", "custom_fields": {"new": null, "sale": null, "color": null, "barcode": null, "dlugosc": "ok. 35.00 mm321", "grubosc": null, "ksztalt": null, "material": "szkło", "srednica": null, "wysokosc": null, "barcode_l": null, "producent": null, "property1": null, "property2": null, "property3": null, "szerokosc": null, "cenazakupu": null, "final_sale": null, "property11": null, "rma_status": null, "rozmiar_toho": null, "nr_kalkulacji": null, "dlugosc_sznura": null, "podmiot_labera": null, "rodzaj_sznurka": null, "podmiot_korallo": null, "rozmiar_dziurki": "18212", "wielkosc_dziurki": "ok. 1,00 mm", "efekt_wykonczenia": null, "produktwyprzedany": null, "rodzaj_opakowania": null, "count_items_labera": "100 szt", "import_scheme_name": null, "product_banner_top": null, "rodzaj_wykonczenia": null, "rozmiar_podstawowy": null, "searchindex_weight": null, "count_items_korallo": "20 szt", "product_banner_bottom": null, "zastosowanie_technika": null, "podmiot_odpowiedzialny": null, "bizuteriazestalichirurgicznej": null}, "meta_keywords": null, "special_price": {"avail": false, "value": 0, "created_at": null, "expired_at": null, "modified_at": null}, "advanced_price": [], "categories_ids": ["1160"], "dimensions_unit": null, "is_downloadable": false, "product_options": [], "is_stock_managed": true, "meta_description": null, "additional_fields": {"status": "2", "sku_type": null, "tax_class": null, "price_type": null, "visibility": "4", "weight_type": null, "qty_increments": null, "enable_googleco": null, "country_of_manufacture": null}, "short_description": null, "grouped_products_ids": [], "related_products_ids": [], "up_sell_products_ids": [], "cross_sell_products_ids": []}, {"id": "14876", "url": "https://www.korallo.pl/catalog/product/view/id/14876?___store=sklep_korallo", "name": "Produkt testowy 7", "type": "simple", "price": 17.3, "u_ean": null, "u_mpn": null, "u_sku": "XX0006", "u_upc": null, "width": null, "height": null, "images": [{"id": "18763", "alt": null, "size": null, "type": "IMAGE_TYPE_ADDITIONAL", "avail": true, "create_at": null, "file_name": "uk0786c_201_1.jpg", "http_path": "https://www.korallo.pl/media/catalog/product/u/k/uk0786c_201_1.jpg", "mime-type": "image/jpeg", "sort_order": 2, "modified_at": null}, {"id": "18764", "alt": null, "size": null, "type": "IMAGE_TYPE_THUMBNAIL", "avail": true, "create_at": null, "file_name": "uk0786a_201_1.jpg", "http_path": "https://www.korallo.pl/media/catalog/product/u/k/uk0786a_201_1.jpg", "mime-type": "image/jpeg", "sort_order": 1, "modified_at": null}, {"id": "18764", "alt": null, "size": null, "type": "IMAGE_TYPE_SMALL", "avail": true, "create_at": null, "file_name": "uk0786a_201_1.jpg", "http_path": "https://www.korallo.pl/media/catalog/product/u/k/uk0786a_201_1.jpg", "mime-type": "image/jpeg", "sort_order": 1, "modified_at": null}, {"id": "18764", "alt": null, "size": null, "type": "IMAGE_TYPE_BASE", "avail": true, "create_at": null, "file_name": "uk0786a_201_1.jpg", "http_path": "https://www.korallo.pl/media/catalog/product/u/k/uk0786a_201_1.jpg", "mime-type": "image/jpeg", "sort_order": 1, "modified_at": null}, {"id": "18765", "alt": null, "size": null, "type": "IMAGE_TYPE_ADDITIONAL", "avail": true, "create_at": null, "file_name": "uk0786b_201_1.jpg", "http_path": "https://www.korallo.pl/media/catalog/product/u/k/uk0786b_201_1.jpg", "mime-type": "image/jpeg", "sort_order": 3, "modified_at": null}], "length": null, "u_gtin": null, "u_isbn": null, "weight": 0, "on_sale": null, "seo_url": "https://www.korallo.pl/produkt/produkt-testowy-7-xx0006", "u_brand": null, "u_model": "XX0006", "in_stock": true, "quantity": 488, "create_at": {"value": "2018-12-04T17:57:37+0100", "format": "Y-m-d\\\\TH:i:sO"}, "discounts": [], "inventory": [], "avail_sale": false, "avail_view": false, "backorders": "False", "cost_price": null, "is_virtual": false, "meta_title": null, "sort_order": null, "stores_ids": ["1", "2"], "tier_price": [], "u_brand_id": null, "description": "Produkt nie na sprzedaż", "group_items": [], "group_price": [], "modified_at": {"value": "2020-09-17T10:07:58+0200", "format": "Y-m-d\\\\TH:i:sO"}, "weight_unit": null, "manage_stock": "True", "tax_class_id": "5", "custom_fields": {"new": "0", "sale": "0", "color": null, "barcode": null, "dlugosc": "ok. 35.00 mm", "grubosc": null, "ksztalt": null, "material": "szkło", "srednica": null, "wysokosc": null, "barcode_l": null, "producent": null, "property1": null, "property2": null, "property3": null, "szerokosc": null, "cenazakupu": null, "final_sale": null, "property11": null, "rma_status": "1", "rozmiar_toho": null, "nr_kalkulacji": null, "dlugosc_sznura": null, "podmiot_labera": null, "rodzaj_sznurka": null, "podmiot_korallo": null, "rozmiar_dziurki": "18212", "wielkosc_dziurki": "ok. 1,00 mm", "efekt_wykonczenia": null, "produktwyprzedany": null, "rodzaj_opakowania": null, "count_items_labera": "20 szt", "import_scheme_name": null, "product_banner_top": null, "rodzaj_wykonczenia": null, "rozmiar_podstawowy": null, "searchindex_weight": null, "count_items_korallo": "20 szt", "product_banner_bottom": null, "zastosowanie_technika": null, "podmiot_odpowiedzialny": null, "bizuteriazestalichirurgicznej": null}, "meta_keywords": null, "special_price": {"avail": false, "value": 0, "created_at": null, "expired_at": null, "modified_at": null}, "advanced_price": [], "categories_ids": [], "dimensions_unit": null, "is_downloadable": false, "product_options": [], "is_stock_managed": true, "meta_description": null, "additional_fields": {"status": "2", "sku_type": null, "tax_class": null, "price_type": null, "visibility": "4", "weight_type": null, "qty_increments": null, "enable_googleco": null, "country_of_manufacture": null}, "short_description": null, "grouped_products_ids": [], "related_products_ids": [], "up_sell_products_ids": [], "cross_sell_products_ids": []}, {"id": "14877", "url": "https://www.korallo.pl/catalog/product/view/id/14877?___store=sklep_korallo", "name": "Produkt testowy 8", "type": "simple", "price": 19.3, "u_ean": null, "u_mpn": null, "u_sku": "XX0007", "u_upc": null, "width": null, "height": null, "images": [{"id": "2696", "alt": null, "size": null, "type": "IMAGE_TYPE_BASE", "avail": true, "create_at": null, "file_name": "DK047.jpg", "http_path": "https://www.korallo.pl/media/catalog/product/D/K/DK047.jpg", "mime-type": "image/jpeg", "sort_order": 1, "modified_at": null}, {"id": "2697", "alt": null, "size": null, "type": "IMAGE_TYPE_THUMBNAIL", "avail": true, "create_at": null, "file_name": "Zrzut2_kopia.png", "http_path": "https://www.korallo.pl/media/catalog/product/Z/r/Zrzut2_kopia.png", "mime-type": "image/png", "sort_order": 2, "modified_at": null}], "length": null, "u_gtin": null, "u_isbn": null, "weight": 0, "on_sale": null, "seo_url": "https://www.korallo.pl/produkt/produkt-testowy-8-xx0007", "u_brand": null, "u_model": "XX0007", "in_stock": true, "quantity": 271, "create_at": {"value": "2018-12-04T17:57:37+0100", "format": "Y-m-d\\\\TH:i:sO"}, "discounts": [], "inventory": [], "avail_sale": false, "avail_view": false, "backorders": "False", "cost_price": null, "is_virtual": false, "meta_title": null, "sort_order": null, "stores_ids": ["1", "2"], "tier_price": [], "u_brand_id": null, "description": "", "group_items": [], "group_price": [], "modified_at": {"value": "2019-01-11T10:37:04+0100", "format": "Y-m-d\\\\TH:i:sO"}, "weight_unit": null, "manage_stock": "True", "tax_class_id": "5", "custom_fields": {"new": "0", "sale": "0", "color": null, "barcode": null, "dlugosc": "ok. 35.00 mm", "grubosc": null, "ksztalt": null, "material": "szkło", "srednica": null, "wysokosc": null, "barcode_l": null, "producent": null, "property1": null, "property2": null, "property3": null, "szerokosc": null, "cenazakupu": null, "final_sale": null, "property11": null, "rma_status": "1", "rozmiar_toho": null, "nr_kalkulacji": null, "dlugosc_sznura": null, "podmiot_labera": null, "rodzaj_sznurka": null, "podmiot_korallo": null, "rozmiar_dziurki": "18212", "wielkosc_dziurki": "ok. 1,00 mm", "efekt_wykonczenia": null, "produktwyprzedany": null, "rodzaj_opakowania": null, "count_items_labera": "1 szt", "import_scheme_name": null, "product_banner_top": null, "rodzaj_wykonczenia": null, "rozmiar_podstawowy": null, "searchindex_weight": null, "count_items_korallo": "10 szt", "product_banner_bottom": null, "zastosowanie_technika": null, "podmiot_odpowiedzialny": null, "bizuteriazestalichirurgicznej": null}, "meta_keywords": null, "special_price": {"avail": false, "value": 0, "created_at": null, "expired_at": null, "modified_at": null}, "advanced_price": [], "categories_ids": ["1160"], "dimensions_unit": null, "is_downloadable": false, "product_options": [], "is_stock_managed": true, "meta_description": null, "additional_fields": {"status": "2", "sku_type": null, "tax_class": null, "price_type": null, "visibility": "4", "weight_type": null, "qty_increments": null, "enable_googleco": null, "country_of_manufacture": null}, "short_description": null, "grouped_products_ids": [], "related_products_ids": [], "up_sell_products_ids": [], "cross_sell_products_ids": []}, {"id": "14880", "url": "https://www.korallo.pl/catalog/product/view/id/14880?___store=sklep_korallo", "name": "Produkt testowy 5", "type": "simple", "price": 12.3, "u_ean": null, "u_mpn": null, "u_sku": "XX0010", "u_upc": null, "width": null, "height": null, "images": [], "length": null, "u_gtin": null, "u_isbn": null, "weight": 0, "on_sale": null, "seo_url": "https://www.korallo.pl/produkt/produkt-testowy-5-xx0010", "u_brand": null, "u_model": "XX0010", "in_stock": true, "quantity": 946, "create_at": {"value": "2018-12-04T17:57:39+0100", "format": "Y-m-d\\\\TH:i:sO"}, "discounts": [], "inventory": [], "avail_sale": false, "avail_view": false, "backorders": "False", "cost_price": null, "is_virtual": false, "meta_title": null, "sort_order": null, "stores_ids": ["1", "2"], "tier_price": [], "u_brand_id": null, "description": "", "group_items": [], "group_price": [], "modified_at": {"value": "2018-12-04T17:57:39+0100", "format": "Y-m-d\\\\TH:i:sO"}, "weight_unit": null, "manage_stock": "True", "tax_class_id": "5", "custom_fields": {"new": null, "sale": null, "color": null, "barcode": null, "dlugosc": null, "grubosc": null, "ksztalt": null, "material": null, "srednica": null, "wysokosc": null, "barcode_l": null, "producent": null, "property1": null, "property2": null, "property3": null, "szerokosc": null, "cenazakupu": null, "final_sale": "0", "property11": null, "rma_status": null, "rozmiar_toho": null, "nr_kalkulacji": null, "dlugosc_sznura": null, "podmiot_labera": null, "rodzaj_sznurka": null, "podmiot_korallo": null, "rozmiar_dziurki": null, "wielkosc_dziurki": null, "efekt_wykonczenia": null, "produktwyprzedany": null, "rodzaj_opakowania": null, "count_items_labera": "10 szt", "import_scheme_name": null, "product_banner_top": null, "rodzaj_wykonczenia": null, "rozmiar_podstawowy": null, "searchindex_weight": null, "count_items_korallo": "13 szt", "product_banner_bottom": null, "zastosowanie_technika": null, "podmiot_odpowiedzialny": null, "bizuteriazestalichirurgicznej": null}, "meta_keywords": null, "special_price": {"avail": false, "value": 0, "created_at": null, "expired_at": null, "modified_at": null}, "advanced_price": [], "categories_ids": ["1533"], "dimensions_unit": null, "is_downloadable": false, "product_options": [], "is_stock_managed": true, "meta_description": null, "additional_fields": {"status": "2", "sku_type": null, "tax_class": null, "price_type": null, "visibility": "4", "weight_type": null, "qty_increments": null, "enable_googleco": null, "country_of_manufacture": null}, "short_description": null, "grouped_products_ids": [], "related_products_ids": [], "up_sell_products_ids": [], "cross_sell_products_ids": []}, {"id": "14881", "url": "https://www.korallo.pl/catalog/product/view/id/14881?___store=sklep_korallo", "name": "xx0001 xx0002", "type": "simple", "price": 0, "u_ean": null, "u_mpn": null, "u_sku": "XX0099", "u_upc": null, "width": null, "height": null, "images": [], "length": null, "u_gtin": null, "u_isbn": null, "weight": null, "on_sale": null, "seo_url": "https://www.korallo.pl/xx0001-xx0002-xx0099", "u_brand": null, "u_model": "XX0099", "in_stock": true, "quantity": 0, "create_at": {"value": "2018-12-04T20:47:26+0100", "format": "Y-m-d\\\\TH:i:sO"}, "discounts": [], "inventory": [], "avail_sale": false, "avail_view": false, "backorders": "False", "cost_price": null, "is_virtual": false, "meta_title": null, "sort_order": null, "stores_ids": ["1", "2"], "tier_price": [], "u_brand_id": null, "description": "", "group_items": [], "group_price": [], "modified_at": {"value": "2021-09-28T15:17:55+0200", "format": "Y-m-d\\\\TH:i:sO"}, "weight_unit": null, "manage_stock": "False", "tax_class_id": "5", "custom_fields": {"new": "0", "sale": "0", "color": null, "barcode": null, "dlugosc": null, "grubosc": null, "ksztalt": null, "material": null, "srednica": null, "wysokosc": null, "barcode_l": null, "producent": null, "property1": null, "property2": null, "property3": null, "szerokosc": null, "cenazakupu": "0.0000", "final_sale": null, "property11": null, "rma_status": "1", "rozmiar_toho": null, "nr_kalkulacji": null, "dlugosc_sznura": null, "podmiot_labera": null, "rodzaj_sznurka": null, "podmiot_korallo": null, "rozmiar_dziurki": null, "wielkosc_dziurki": null, "efekt_wykonczenia": null, "produktwyprzedany": null, "rodzaj_opakowania": null, "count_items_labera": null, "import_scheme_name": null, "product_banner_top": null, "rodzaj_wykonczenia": null, "rozmiar_podstawowy": null, "searchindex_weight": null, "count_items_korallo": null, "product_banner_bottom": null, "zastosowanie_technika": null, "podmiot_odpowiedzialny": null, "bizuteriazestalichirurgicznej": null}, "meta_keywords": null, "special_price": {"avail": false, "value": 27.77, "created_at": null, "expired_at": null, "modified_at": null}, "advanced_price": [], "categories_ids": [], "dimensions_unit": null, "is_downloadable": false, "product_options": [], "is_stock_managed": false, "meta_description": null, "additional_fields": {"status": "2", "sku_type": null, "tax_class": null, "price_type": null, "visibility": "4", "weight_type": null, "qty_increments": null, "enable_googleco": null, "country_of_manufacture": null}, "short_description": null, "grouped_products_ids": [], "related_products_ids": [], "up_sell_products_ids": [], "cross_sell_products_ids": []}, {"id": "14882", "url": "https://www.korallo.pl/catalog/product/view/id/14882?___store=sklep_korallo", "name": "produkt do pobrania", "type": "downloadable", "price": 1, "u_ean": null, "u_mpn": null, "u_sku": "XX0098", "u_upc": null, "width": null, "height": null, "images": [], "length": null, "u_gtin": null, "u_isbn": null, "weight": null, "on_sale": null, "seo_url": "https://www.korallo.pl/produkt/produkt-do-pobrania-xx0098", "u_brand": null, "u_model": "XX0098", "in_stock": true, "quantity": 0, "create_at": {"value": "2018-12-04T20:56:38+0100", "format": "Y-m-d\\\\TH:i:sO"}, "discounts": [], "inventory": [], "avail_sale": false, "avail_view": false, "backorders": "False", "cost_price": null, "is_virtual": true, "meta_title": null, "sort_order": null, "stores_ids": ["1", "2"], "tier_price": [], "u_brand_id": null, "description": "jhjghhjgughjhg77777", "group_items": [], "group_price": [], "modified_at": {"value": "2018-12-06T16:02:49+0100", "format": "Y-m-d\\\\TH:i:sO"}, "weight_unit": null, "manage_stock": "False", "tax_class_id": "5", "custom_fields": {"new": "0", "cost": null, "sale": "0", "color": null, "barcode": null, "dlugosc": null, "grubosc": null, "ksztalt": null, "material": null, "srednica": null, "wysokosc": null, "barcode_l": null, "producent": null, "property1": null, "property2": null, "property3": null, "szerokosc": null, "cenazakupu": "0.0000", "final_sale": null, "property11": null, "rma_status": "1", "rozmiar_toho": null, "nr_kalkulacji": null, "dlugosc_sznura": null, "podmiot_labera": null, "rodzaj_sznurka": null, "podmiot_korallo": null, "rozmiar_dziurki": null, "wielkosc_dziurki": null, "efekt_wykonczenia": null, "produktwyprzedany": null, "rodzaj_opakowania": null, "count_items_labera": null, "import_scheme_name": null, "product_banner_top": null, "rodzaj_wykonczenia": null, "rozmiar_podstawowy": null, "searchindex_weight": null, "count_items_korallo": null, "product_banner_bottom": null, "zastosowanie_technika": null, "podmiot_odpowiedzialny": null, "bizuteriazestalichirurgicznej": null}, "meta_keywords": null, "special_price": {"avail": false, "value": 0, "created_at": null, "expired_at": null, "modified_at": null}, "advanced_price": [], "categories_ids": [], "dimensions_unit": null, "is_downloadable": true, "product_options": [], "is_stock_managed": false, "meta_description": null, "additional_fields": {"status": "2", "sku_type": null, "tax_class": null, "price_type": null, "visibility": "4", "weight_type": null, "qty_increments": null, "enable_googleco": null, "country_of_manufacture": null}, "short_description": null, "grouped_products_ids": [], "related_products_ids": [], "up_sell_products_ids": [], "cross_sell_products_ids": []}, {"id": "14884", "url": "https://www.korallo.pl/catalog/product/view/id/14884?___store=sklep_korallo", "name": " promoset bundle XX0097", "type": "simple", "price": 0, "u_ean": null, "u_mpn": null, "u_sku": "XX0097", "u_upc": null, "width": null, "height": null, "images": [], "length": null, "u_gtin": null, "u_isbn": null, "weight": null, "on_sale": null, "seo_url": "https://www.korallo.pl/produkt/-promoset-bundle-xx0097-xx0097", "u_brand": null, "u_model": "XX0097", "in_stock": true, "quantity": 0, "create_at": {"value": "2019-01-08T18:56:02+0100", "format": "Y-m-d\\\\TH:i:sO"}, "discounts": [], "inventory": [], "avail_sale": false, "avail_view": false, "backorders": "False", "cost_price": null, "is_virtual": false, "meta_title": null, "sort_order": null, "stores_ids": ["1", "2"], "tier_price": [], "u_brand_id": null, "description": "", "group_items": [], "group_price": [], "modified_at": {"value": "2021-03-17T12:31:08+0100", "format": "Y-m-d\\\\TH:i:sO"}, "weight_unit": null, "manage_stock": "False", "tax_class_id": "5", "custom_fields": {"new": "0", "sale": "0", "color": null, "barcode": null, "dlugosc": null, "grubosc": null, "ksztalt": null, "material": null, "srednica": null, "wysokosc": null, "barcode_l": null, "producent": null, "property1": "128", "property2": null, "property3": null, "szerokosc": "1", "cenazakupu": "0.0000", "final_sale": null, "property11": null, "rma_status": "1", "rozmiar_toho": null, "nr_kalkulacji": null, "dlugosc_sznura": null, "podmiot_labera": null, "rodzaj_sznurka": null, "podmiot_korallo": null, "rozmiar_dziurki": null, "wielkosc_dziurki": null, "efekt_wykonczenia": null, "produktwyprzedany": null, "rodzaj_opakowania": null, "count_items_labera": null, "import_scheme_name": null, "product_banner_top": null, "rodzaj_wykonczenia": null, "rozmiar_podstawowy": null, "searchindex_weight": null, "count_items_korallo": null, "product_banner_bottom": null, "zastosowanie_technika": null, "podmiot_odpowiedzialny": null, "bizuteriazestalichirurgicznej": null}, "meta_keywords": null, "special_price": {"avail": false, "value": 29.9, "created_at": null, "expired_at": null, "modified_at": null}, "advanced_price": [], "categories_ids": [], "dimensions_unit": null, "is_downloadable": false, "product_options": [], "is_stock_managed": false, "meta_description": null, "additional_fields": {"status": "2", "sku_type": null, "tax_class": null, "price_type": null, "visibility": "4", "weight_type": null, "qty_increments": null, "enable_googleco": null, "country_of_manufacture": null}, "short_description": null, "grouped_products_ids": [], "related_products_ids": [], "up_sell_products_ids": [], "cross_sell_products_ids": []}], "products_count": 10}';

       Api2cartCallResponse::query()->create([
           'type' => 'product.list.json',
           'url' => 'product.list.json',
           'response' => json_decode($str)
       ]);


       ProcessImportedProductsJob::dispatchSync();

       $this->assertDatabaseHas('modules_api2cart_call_responses', []);
       $this->assertDatabaseHas('external_products', []);
    }
}
